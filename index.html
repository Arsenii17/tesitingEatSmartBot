<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EatSmart</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap');
  /**{
      overflow-x: hidden;
  }*/
  body{
      overflow-x: hidden;

      margin: 6px;
      background-color: #ffffff;
    }
    .slideshow {
      position: relative;
      height: 200px;
    }

    @media (min-width: 391px) {
      .additional-options {
        width: 390px;
      }
      #icon-radio-group{
        width: 405px;
      }
    }


    .slide {
      width: 387px;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      display: none;
    }

    .slide:first-child {
      display: block;
    }
    .sliderTitle{
      margin: auto 16px;
    }
    .greeting{
        font-size: 32px;
        line-height: 36px;
    }
    .under_greeting{
        margin-top: 4px;
        font-weight: normal;
        font-size: 14px;
        color: #8F8F8F;
        margin-bottom: 20px;
    }
    #purple_text{
      color: #9C6AF9;
    }
    .slide{
      font-family: "Onest", sans-serif;
      font-optical-sizing: auto;
      font-style: normal;
    }
    .main_image{
      max-width: 390px;
    }

    .page1{
      width: 116px;

    }
    span{
      -webkit-touch-callout: none;
    	-webkit-user-select: none;
    	-khtml-user-select: none;
    	-moz-user-select: none;
    	-ms-user-select: none;
    	user-select: none;
    }

    .option {
      width: calc(90% - 20px);
      display: flex;
      align-items: center;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ccc; /* Добавляем рамку */
      margin: 0px 10px;
      cursor: pointer; /* Делаем курсор указателем при наведении */
      transition: background-color 0.3s, color 0.3s; /* Добавляем плавные анимации при наведении */
    }

    .option:hover {
      background-color: #f0f0f0; /* Изменяем фон при наведении */
    }

    .option img {
      margin-right: 8px; /* Отступ между изображением и текстом */
    }

    .option span {
      font-size: 16px; /* Размер текста */
    }

  /*  .option input[type="radio"] {
      display: none; /* Скрываем радиокнопку 
    }*/

    .option input[type="radio"] + span:before {
      content: ""; /* Добавляем псевдоэлемент */
      display: inline-block;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid #9C6AF9; /* Цвет рамки радиокнопки */
      margin-right: 8px; /* Отступ между радиокнопкой и текстом */
      transition: background-color 0.3s; /* Плавная анимация при изменении цвета фона */
    }

    .option input[type="radio"]:checked + span:before {
      background-color: #9C6AF9; /* Цвет заливки радиокнопки при выборе */
    }
    .additional-options {
      margin-top: 30px;
      margin-left: 10px;
    }

    .not-found {
      font-family: "Quicksand", sans-serif;
      font-weight: 510;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .medical-conditions {
      width: 90%;
      height: 80px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      resize: none; /* Запретить изменение размеров */
    }





/*    Основное где вес и тд*/
    .option1 {
      display: flex;
      align-items: center;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin: 0px 10px 20px;
      cursor: pointer; /* Делаем курсор указателем при наведении */
      transition: background-color 0.3s, color 0.3s; /* Добавляем плавные анимации при наведении */
    }

    .option1 span {
      width: 120px;
      font-size: 16px; /* Размер текста */
    }

    .option1 select,
    .option1 input[type="number"] {
      flex-grow: 1;
      padding: 8px;
      border: none; /* Убираем рамку */
      border-radius: 0; /* Убираем бордер радиус */
      border-bottom: 1px solid #ccc; /* Добавляем нижнюю границу */
      font-size: 14px;
      margin-left: 10px;
    }

    .preference-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      /*grid-template-columns: repeat(3, 110px);*/
      grid-auto-rows: 105px;
      gap: 25px;
      margin-top: 20px;
    }

    .preference-card {
      width: 110px;
      height: 110px;
      border-radius: 10px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      margin-left: 5px;
    }

    .preference-card:hover {
      background-color: #f0f0f0;
    }

    .preference-title {
      font-size: 14px;
      color: #8F8F8F;
    }

    .preference-card.selected {
      background-color: #9C6AF9;
    }

    .preference-card.selected .preference-title {
      color: #fff;
    }

    .card-title {

      margin-top: 127px;

      text-align: center;
      font-family: "Quicksand", sans-serif;
      font-size: 14px;
      color: #8F8F8F;
/*      margin-top: 5px; /* Добавлено для отступа между карточкой и названием */*/
    }
    .option-label {
      display: flex;
      align-items: center;
      width: 100%; /* Растягиваем label на всю ширину option */
    }
/*    .option-label:hover {
      background-color: #f0f0f0;
    }
*/




</style>
<body>
  <button onclick="prevSlide()">Previous</button>
  <button onclick="nextSlide()">NEXT</button>
  
    <div class="slideshow">
      
      <div class="slide">
        <div class="sliderTitle">
          <h1 class="greeting">Добро<br>пожаловать</h1>
          <h2 class="under_greeting">Это <span id="purple_text">EatSmart</span>, твой личный ИИ-гуру питания</h2>
        </div>
        <img class="main_image" src="main_img.jpg">  
      </div>




  

      <!-- <div class="slide">
        <h1 class="greeting">Основное</h1>
        <h2 class="under_greeting">Чем больше мы о вас знаем, тем лучше мы сможем вам помочь:</h2>
      
      </div> -->
      <div class="slide">
        <h1 class="greeting">Основное</h1>
        <h2 class="under_greeting">Чем больше мы о вас знаем, тем лучше мы сможем вам помочь:</h2>
        <!-- Пол -->
        <div class="option1">
          <span>Пол:</span>
          <select id="gender" name="gender" style="margin-left: 200px;">
            <option value="male">Мужской</option>
            <option value="female">Женский</option>
          </select>
        </div>
        <!-- Вес -->
        <div class="option1">
          <span>Вес:</span>
          <input type="number" id="weight" name="weight" step="1" min="0" max="250" style="margin-left: 205px;">
          <span>кг</span>
        </div>
        <!-- Рост -->
        <div class="option1">
          <span>Рост:</span>
          <input type="number" id="height" name="height" step="1" min="0" max="250" style="margin-left: 197px;">
          <span>см</span>
        </div>
        <!-- Возраст -->
        <div class="option1">
          <span>Возраст:</span>
          <input type="number" id="age" name="age" step="1" min="0" max="100" style="margin-left: 172px;">
          <span>лет</span>
        </div>

        <!-- <button onclick="printValues()">Вывести значения</button> -->
      </div>






      <div class="slide">
        <div class="sliderTitle">
          <h1 class="greeting">Здоровье</h1>
          <h2 class="under_greeting">Пожалуйста, укажите все имеющиеся у вас медицинские противопоказания:</h2>
        </div>
        <div id="icon-radio-group">
          <div class="option">
            <label for="medical_option1" class="option-label">

              <img src="icon1.png" alt="Icon 1">
              <span>Диабет</span>
              <input type="radio" id="medical_option1" name="medical_condition" value="Диабет" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 234px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="medical_option2" class="option-label">

              <img src="icon2.png" alt="Icon 1">
              <span>Ожирение</span>
              <input type="radio" id="medical_option2" name="medical_condition" value="Ожирение" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 205px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="medical_option3" class="option-label">
              <img src="icon3.png" alt="Icon 1">
              <span>Гипертония</span>
              <input type="radio" id="medical_option3" name="medical_condition" value="Гипертония" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 198px;" >
            </label>
          </div>
          <br>
          <div class="option">
            <label for="medical_option4" class="option-label">

              <img src="icon4.png" alt="Icon 1">
              <span>Сердечные заболевания</span>
              <input type="radio" id="medical_option4" name="medical_condition" value="Сердечные заболевания" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 188px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="medical_option5" class="option-label">

              <img src="icon5.png" alt="Icon 1">
              <span>Аллергия</span>
              <input type="radio" id="medical_option5" name="medical_condition" value="Аллергия"  style="padding-left: 20%; margin-left: 215px;">
            </label>
          </div>
          <div class="additional-options">
            <div class="not-found">Не нашли в списке?</div>
              <textarea class="medical-conditions" placeholder="Введите здесь все имеющиеся медицинские противопоказания. Не более 600 символов"></textarea>
          </div>

        </div>
      </div>





       <div class="slide">
        <div class="sliderTitle">
          <h1 class="greeting">Цели</h1>
          <h2 class="under_greeting">Выберите одну или несколько целей которые больше вам подходят:</h2>
        </div>
        <div id="icon-radio-group">
          <div class="option">
            <label for="goal1" class="option-label">
              <img src="up.png" alt="Icon 1" width='20px' height='20px'>
              <span style="margin-top: 2px;margin-left: 10px;">Набор массы</span>
              <input type="radio" id="goal1" name="goal" value="Набор массы" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 230px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="goal2" class="option-label">
              <img src="down2.png" alt="Icon 1"  width='20px' height='20px'>
              <span style="margin-top: 2px;margin-left: 10px;">Снижение веса</span>
              <input type="radio" id="goal2" name="goal" value="Снижение веса" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 201px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="goal3" class="option-label">

              <img src="ves.png" alt="Icon 1"  width='22px' height='22px'>
              <span style="margin-top: 2px;margin-left: 8px;">Поддержание текущего веса</span>
              <input type="radio" id="goal3" name="goal" value="Поддержание текущего веса" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 173px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="goal4" class="option-label">

              <img src="heart.png" alt="Icon 1"  width='20px' height='20px'>
              <span style="margin-top: 2px;margin-left: 10px;">Улучшение здоровья</span>
              <input type="radio" id="goal4" name="goal" value="Улучшение здоровья" onMouseDown="this.isChecked=this.checked;" 
              onClick="this.checked=!this.isChecked;" style="padding-left: 20%; margin-left: 196px;">
            </label>
          </div>
          <br>
          <div class="option">
            <label for="goal5" class="option-label">

              <img src="run.png" alt="Icon 1" width='20px' height='22px'>
              <span style="margin-top: 2px;margin-left: 10px;">Улучшение спортивных результатов</span>
              <input type="radio" id="goal5" name="goal" value="Улучшение спортивных результатов" style="padding-left: 20%; margin-left: 192px;">
            </label>
          </div>
          <div class="additional-options">
            <div class="not-found">Не нашли в списке?</div>
              <textarea class="medical-conditions" placeholder="Введите здесь все имеющиеся медицинские противопоказания. Не более 600 символов"></textarea>
          </div>
            <button onclick="collectDataAndPrint()">Вывести JSON</button>

        </div>
        </div>
      </div>
      </div>







     <div class="slide">
      <div class="sliderTitle">
        <h1 class="greeting">Предпочтения</h1>
        <h2 class="under_greeting">Выберите продукты и блюда, которые вы предпочитаете употреблять:</h2>
      </div>
      <div class="preference-cards">
        <!-- Карточка 1 -->
        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Говядина</div> 
        </div>
        <!-- Карточка 2 -->
        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Овощи</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Клубника</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Картофель</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Перец</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Спагетти</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Макароны</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Хлеб</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Капуста</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Крупа</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Сыр</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Киви</div> 
        </div>


        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Цитрусовые</div> 
        </div>


        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Рис</div> 
        </div>

        <div class="preference-card">
          <h3 class="preference-title"></h3>
          <div class="card-title">Шоколад</div> 
        </div>

        <!-- Добавьте другие карточки здесь -->
      </div>
      <br><br>
      <div class="additional-options">
        <div class="not-found">Не нашли в списке?</div>
          <textarea class="medical-conditions" placeholder="Введите здесь все имеющиеся медицинские противопоказания. Не более 600 символов"></textarea>
      </div>
      <!-- <button onclick="nextSlide()">Продолжить</button> -->
    </div>




    <script>        


        let tg = window.Telegram.WebApp;

           // Определение переменных для хранения данных
        let userData = {
          gender: "",
          weight: "",
          height: "",
          age: "",
          medicalCondition: "",
          goal: ""
        };

        tg.expand()
        tg.backgroundColor = "#FCFCFC"
        tg.headerColor = "#FCFCFC"
        tg.secondary_bg_color = "#FFFFFF"
        MainButton = tg.MainButton
        MainButton.text = "Начать"
        MainButton.textColor = "#FFFFFF"
        MainButton.color = "#9C6AF9"
        MainButton.show()
        tg.onEvent('mainButtonClicked', nextSlide)

        BackButton = tg.BackButton
        BackButton.color = "#3881F0"

        tg.onEvent('backButtonClicked', prevSlide)

        tg.SettingsButton.show()
        tg.extend()
        tg.expand()

        const slideshow = document.getElementById('slideshow');
        const slides = document.querySelectorAll('.slide');
        let currentSlide = 0;

        function nextSlide() {
          currentSlide++;
          if (currentSlide >= slides.length) {
              currentSlide = 0;
          }
          if (currentSlide == 0){
            console.log("case 0")
              BackButton.hide()
              MainButton.text = "Начать"
          }
          else{
              console.log("case 1")
              BackButton.show()
              MainButton.text = "Продолжить"
              
          }
          
          if (BackButton.isVisible == false) {BackButton.show();}

          showSlide(currentSlide);

        };

        function prevSlide() {

        currentSlide--;

        if (currentSlide < 0) {
            currentSlide = slides.length - 1;
        }
        else if (currentSlide == 0){
          console.log("case 0")
            BackButton.hide()
            console.log("Hidden")
            MainButton.text = "Начать"
        }
        else{
            console.log("case 1")
            BackButton.show()
            MainButton.text = "Продолжить"
            
        }
        

        // switch (currentSlide) {
        //   case 0:
        //     console.log("case 0")
        //     BackButton.hide()
        //     MainButton.text = "Начать"
        //     break

        //   case 1:
        //     console.log("case 1")
        //     BackButton.show()
        //     MainButton.text = "Продолжить"
        //     break
        //   }

        showSlide(currentSlide);
        };

        function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.style.display = i === index? 'block' : 'none';
        });
        }
        const radioGroup = document.getElementById('radio-group');
        const radios = radioGroup.querySelectorAll('input[type="radio"]');

        radios.forEach(radio => {
          radio.addEventListener('change', () => {
            console.log(`Selected option: ${radio.value}`);
          });
        });

        function encheckbox(option_num) {
          console.log(option_num);

        }


        // Обработчики кликов для выбора карточек
        const preferenceCards = document.querySelectorAll('.preference-card');

        preferenceCards.forEach(card => {
          card.addEventListener('click', () => {
            card.classList.toggle('selected');
          });
        });



        // let age = document.getElementById("age");
        // // let user__id = tg.initDataUnsafe.user.id;
        // function printValues() {
        //   // Получаем значения полей
        //   const gender = document.getElementById('gender').value;
        //   const weight = document.getElementById('weight').value;
        //   const height = document.getElementById('height').value;
        //   const age = document.getElementById('age').value;


        //   let data ={
        //     // user__id: user__id,
        //     gender: gender,
        //     weight: weight,
        //     height: height,
        //     age: age
        //   }
        //   console.log(data)
        //   tg.sendData(JSON.stringify(data))
        //   // Выводим значения в консоль
        //   // console.log("Пол:", gender);
        //   // console.log("Вес:", weight, "кг");
        //   // console.log("Рост:", height, "см");
        //   // console.log("Возраст:", age, "лет");
        // }



     

        // Функция для сбора данных и вывода в консоль
        function collectData() {
          // Получение значений с первого экрана
          userData.gender = document.getElementById('gender').value;
          userData.weight = document.getElementById('weight').value;
          userData.height = document.getElementById('height').value;
          userData.age = document.getElementById('age').value;

          // Получение выбранного медицинского состояния со второго экрана
          const medicalConditions = document.querySelectorAll('input[name="medical_condition"]');
          medicalConditions.forEach(condition => {
            if (condition.checked) {
              userData.medicalCondition = condition.value;
            }
          });

          // Получение выбранной цели с третьего экрана
          const goals = document.querySelectorAll('input[name="goal"]');
          goals.forEach(goal => {
            if (goal.checked) {
              userData.goal = goal.value;
            }
          });

          // console.log(JSON.stringify(userData));
        }
        function collectDataAndPrint() {
          collectData();
          console.log(JSON.stringify(userData));
        }

        

    </script>
</body>
</html>
